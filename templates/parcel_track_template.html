{% extends 'base.html' %}
{% block title %}
Трек товара
{% endblock %}

{% block content %}
{% if current_user.phone_number != "admin" %}
    <section class="section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="card card-parcel card-parcel-one">
                        <div class="card-status-body">
                            <div class="card-text-title mb-2">{{ track_info.product_name }}</div>
                            <div class="row ">
                                <div class="col-lg-4 col-12">
                                    <div class="parcel-mini-block ">
                                        <div class="card-text mr-2">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M15 22C14.59 22 14.25 21.66 14.25 21.25V2.75C14.25 2.34 14.59 2 15 2C15.41 2 15.75 2.34 15.75 2.75V21.25C15.75 21.66 15.41 22 15 22Z" fill="#9FA4AD"></path>
                                                <path d="M18 20H15V4H18C20.21 4 22 5.79 22 8V16C22 18.21 20.21 20 18 20Z" fill="#9FA4AD"></path>
                                                <path d="M6 4C3.79 4 2 5.79 2 8V16C2 18.21 3.79 20 6 20H11C11.55 20 12 19.55 12 19V5C12 4.45 11.55 4 11 4H6ZM7.75 15.5C7.75 15.91 7.41 16.25 7 16.25C6.59 16.25 6.25 15.91 6.25 15.5V8.5C6.25 8.09 6.59 7.75 7 7.75C7.41 7.75 7.75 8.09 7.75 8.5V15.5Z" fill="#9FA4AD"></path>
                                            </svg>
                                            Трек номер:
                                        </div>
                                        <div class="card-text-title">{{ track_info.track_number }}</div>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-12 mb-2">
                                    <div class="parcel-mini-block ">
                                        <div class="card-text mr-2">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M11.05 14.95L9.2 16.8C8.81 17.19 8.19 17.19 7.79 16.81C7.68 16.7 7.57 16.6 7.46 16.49C6.43 15.45 5.5 14.36 4.67 13.22C3.85 12.08 3.19 10.94 2.71 9.81C2.24 8.67 2 7.58 2 6.54C2 5.86 2.12 5.21 2.36 4.61C2.6 4 2.98 3.44 3.51 2.94C4.15 2.31 4.85 2 5.59 2C5.87 2 6.15 2.06 6.4 2.18C6.66 2.3 6.89 2.48 7.07 2.74L9.39 6.01C9.57 6.26 9.7 6.49 9.79 6.71C9.88 6.92 9.93 7.13 9.93 7.32C9.93 7.56 9.86 7.8 9.72 8.03C9.59 8.26 9.4 8.5 9.16 8.74L8.4 9.53C8.29 9.64 8.24 9.77 8.24 9.93C8.24 10.01 8.25 10.08 8.27 10.16C8.3 10.24 8.33 10.3 8.35 10.36C8.53 10.69 8.84 11.12 9.28 11.64C9.73 12.16 10.21 12.69 10.73 13.22C10.83 13.32 10.94 13.42 11.04 13.52C11.44 13.91 11.45 14.55 11.05 14.95Z" fill="#9FA4AD"></path>
                                                <path d="M21.9696 18.33C21.9696 18.61 21.9196 18.9 21.8196 19.18C21.7896 19.26 21.7596 19.34 21.7196 19.42C21.5496 19.78 21.3296 20.12 21.0396 20.44C20.5496 20.98 20.0096 21.37 19.3996 21.62C19.3896 21.62 19.3796 21.63 19.3696 21.63C18.7796 21.87 18.1396 22 17.4496 22C16.4296 22 15.3396 21.76 14.1896 21.27C13.0396 20.78 11.8896 20.12 10.7496 19.29C10.3596 19 9.96961 18.71 9.59961 18.4L12.8696 15.13C13.1496 15.34 13.3996 15.5 13.6096 15.61C13.6596 15.63 13.7196 15.66 13.7896 15.69C13.8696 15.72 13.9496 15.73 14.0396 15.73C14.2096 15.73 14.3396 15.67 14.4496 15.56L15.2096 14.81C15.4596 14.56 15.6996 14.37 15.9296 14.25C16.1596 14.11 16.3896 14.04 16.6396 14.04C16.8296 14.04 17.0296 14.08 17.2496 14.17C17.4696 14.26 17.6996 14.39 17.9496 14.56L21.2596 16.91C21.5196 17.09 21.6996 17.3 21.8096 17.55C21.9096 17.8 21.9696 18.05 21.9696 18.33Z" fill="#9FA4AD"></path>
                                            </svg>
                                            Телефон:
                                        </div>
                                        <div class="card-text-title">{{ track_info.user.phone_number }}</div>
                                    </div>
                                </div>
                            </div>

                            <div class="card-text-title mt-2 mb-2">Контроль продукта</div>
                            <div class="stepper-block">
                                <div class="stepper-line-block">
                                        <div class="stepper-dot active"></div>
                                        {% for i in range(1, 4) %}
                                            {% if i < track_status: %}
                                                <div class="stepper-line active"></div>
                                                <div class="stepper-dot active"></div>
                                            {% else %}
                                                <div class="stepper-line not-active"></div>
                                                <div class="stepper-dot not-active"></div>
                                            {% endif %}
                                        {% endfor %}
                                </div>
                                 <div class="stepper-information">
                                        <div class="card card-stepper-info  ">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-md-12 col-lg-12">
                                                        <div class="card-stepper-title">
                                                            Товар зарегистрирован в системе
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card card-stepper-info  ">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-md-12 col-lg-12">
                                                        <div class="card-stepper-title">
                                                            На складе в Китае
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card card-stepper-info  ">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-md-12 col-lg-12">
                                                        <div class="card-stepper-title">
                                                            На складе в Алматы
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card card-stepper-info  ">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-md-12 col-lg-12">
                                                        <div class="card-stepper-title">
                                                            Товар доставлен
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                  </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% else %}
<!--<h1>current_user.is_admin</h1>-->
<section class="section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="card card-parcel card-parcel-one">
                        <div class="card-status-body">
                            <div class="card-text-title mb-2">{{ track_info.product_name }}</div>
                            <div class="row ">
                                <div class="col-lg-4 col-12">
                                    <div class="parcel-mini-block ">
                                        <div class="card-text mr-2">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M15 22C14.59 22 14.25 21.66 14.25 21.25V2.75C14.25 2.34 14.59 2 15 2C15.41 2 15.75 2.34 15.75 2.75V21.25C15.75 21.66 15.41 22 15 22Z" fill="#9FA4AD"></path>
                                                <path d="M18 20H15V4H18C20.21 4 22 5.79 22 8V16C22 18.21 20.21 20 18 20Z" fill="#9FA4AD"></path>
                                                <path d="M6 4C3.79 4 2 5.79 2 8V16C2 18.21 3.79 20 6 20H11C11.55 20 12 19.55 12 19V5C12 4.45 11.55 4 11 4H6ZM7.75 15.5C7.75 15.91 7.41 16.25 7 16.25C6.59 16.25 6.25 15.91 6.25 15.5V8.5C6.25 8.09 6.59 7.75 7 7.75C7.41 7.75 7.75 8.09 7.75 8.5V15.5Z" fill="#9FA4AD"></path>
                                            </svg>
                                            Трек номер:
                                        </div>
                                        <div class="card-text-title">{{ track_info.track_number }}</div>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-12 mb-2">
                                    <div class="parcel-mini-block ">
                                        <div class="card-text mr-2">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M11.05 14.95L9.2 16.8C8.81 17.19 8.19 17.19 7.79 16.81C7.68 16.7 7.57 16.6 7.46 16.49C6.43 15.45 5.5 14.36 4.67 13.22C3.85 12.08 3.19 10.94 2.71 9.81C2.24 8.67 2 7.58 2 6.54C2 5.86 2.12 5.21 2.36 4.61C2.6 4 2.98 3.44 3.51 2.94C4.15 2.31 4.85 2 5.59 2C5.87 2 6.15 2.06 6.4 2.18C6.66 2.3 6.89 2.48 7.07 2.74L9.39 6.01C9.57 6.26 9.7 6.49 9.79 6.71C9.88 6.92 9.93 7.13 9.93 7.32C9.93 7.56 9.86 7.8 9.72 8.03C9.59 8.26 9.4 8.5 9.16 8.74L8.4 9.53C8.29 9.64 8.24 9.77 8.24 9.93C8.24 10.01 8.25 10.08 8.27 10.16C8.3 10.24 8.33 10.3 8.35 10.36C8.53 10.69 8.84 11.12 9.28 11.64C9.73 12.16 10.21 12.69 10.73 13.22C10.83 13.32 10.94 13.42 11.04 13.52C11.44 13.91 11.45 14.55 11.05 14.95Z" fill="#9FA4AD"></path>
                                                <path d="M21.9696 18.33C21.9696 18.61 21.9196 18.9 21.8196 19.18C21.7896 19.26 21.7596 19.34 21.7196 19.42C21.5496 19.78 21.3296 20.12 21.0396 20.44C20.5496 20.98 20.0096 21.37 19.3996 21.62C19.3896 21.62 19.3796 21.63 19.3696 21.63C18.7796 21.87 18.1396 22 17.4496 22C16.4296 22 15.3396 21.76 14.1896 21.27C13.0396 20.78 11.8896 20.12 10.7496 19.29C10.3596 19 9.96961 18.71 9.59961 18.4L12.8696 15.13C13.1496 15.34 13.3996 15.5 13.6096 15.61C13.6596 15.63 13.7196 15.66 13.7896 15.69C13.8696 15.72 13.9496 15.73 14.0396 15.73C14.2096 15.73 14.3396 15.67 14.4496 15.56L15.2096 14.81C15.4596 14.56 15.6996 14.37 15.9296 14.25C16.1596 14.11 16.3896 14.04 16.6396 14.04C16.8296 14.04 17.0296 14.08 17.2496 14.17C17.4696 14.26 17.6996 14.39 17.9496 14.56L21.2596 16.91C21.5196 17.09 21.6996 17.3 21.8096 17.55C21.9096 17.8 21.9696 18.05 21.9696 18.33Z" fill="#9FA4AD"></path>
                                            </svg>
                                            Телефон:
                                        </div>
                                        <div class="card-text-title">{{ track_info.user.phone_number }}</div>
                                    </div>
                                </div>
                            </div>
{% if track_status != 5 %}
                            <div class="card-text-title mt-2 mb-2">Контроль продукта</div>

                            <div class="stepper-block">
                                <div class="stepper-line-block">
                                        <div class="stepper-dot active"></div>
                                        {% for i in range(1, 4) %}
                                            {% if i < track_status: %}
                                                <div class="stepper-line active"></div>
                                                <div class="stepper-dot active"></div>
                                            {% else %}
                                                <div class="stepper-line not-active"></div>
                                                <div class="stepper-dot not-active"></div>
                                            {% endif %}
                                        {% endfor %}
                                </div>
                                 <div class="stepper-information">
                                        <div class="card card-stepper-info  ">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-md-12 col-lg-12" style="display: flex;">
                                                        <div class="card-stepper-title" style="margin-right: 50px;">
                                                            Товар зарегистрирован в системе
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card card-stepper-info  ">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-md-12 col-lg-12" style="    display: grid;
    grid-template-columns: 300px 1fr;">
                                                        <div class="card-stepper-title" style="margin-right: 50px; margin-top: 2px;">
                                                            На складе в Китае
                                                        </div>
                                                        <form method="post" action="/confirm/{{track_info.track_number}}/2">
                                                            {% if track_status == 1 %}
                                                            <button style="background: none;
    border: 1px solid grey;
    border-radius: 8px;">Подтвердить</button>
                                                            {% endif %}
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card card-stepper-info  ">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-md-12 col-lg-12" style="    display: grid;
    grid-template-columns: 300px 1fr;">
                                                        <div class="card-stepper-title" style="margin-right: 50px; margin-top: 2px;">
                                                            На складе в Алматы
                                                        </div>
                                                        <form method="post" action="/confirm/{{track_info.track_number}}/3">
                                                            {% if track_status == 2 %}
                                                            <button style="background: none;
    border: 1px solid grey;
    border-radius: 8px;">Подтвердить</button>
                                                            {% endif %}
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card card-stepper-info  ">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-md-12 col-lg-12" style="    display: grid;
    grid-template-columns: 300px 1fr;">
                                                        <div class="card-stepper-title" style="margin-right: 50px; margin-top: 2px;">
                                                            Товар доставлен
                                                        </div>
                                                        <form method="post" action="/confirm/{{track_info.track_number}}/4">
                                                            {% if track_status == 3 %}
                                                            <button style="background: none;
    border: 1px solid grey;
    border-radius: 8px;">Подтвердить</button>
                                                            {% endif %}

                                                        </form>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                     <form method="post" action="/confirm/{{track_info.track_number}}/5">
                                                        <button class="btn btn-default btn-edit btn-archive">В архив</button>
                                                    </form>
                                  </div>
                            </div>
                        </div>
                        {% else %}
                            <p>Товар в архиве</p>
                            {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </section>

{% endif %}
{% endblock %}

<!-- Scripts -->
{% block scripts %}
<script src="https://amanat918.kz/js/jquery.min.js"></script>
<script src="https://amanat918.kz/js/mask.input.js"></script>
<script src="https://amanat918.kz/plugins/sweetalert2/sweetalert2.js?v=1.1"></script>
<script src="https://amanat918.kz/js/bootstrap.bundle.min.js"></script>
<script src="https://amanat918.kz/js/lottie.js"></script>
<script src="https://amanat918.kz/js/script.js?v=1.5"></script>
<script src="https://cdn.plyr.io/3.6.3/plyr.js"></script>
<script>
        const players = Plyr.setup('#player', {
            controls: ['play', 'progress', 'current-time', 'mute', 'volume'],
        });

        function copyText(text, baseClass) {
            navigator.clipboard.writeText(text);
            $(baseClass).addClass('copy-success');
        }

    </script>
<script>




    function alertErrorBuyAscCoedModal(text = "") {
        Swal.fire({
            title: text ? text : "Қате!",
            padding: '2em',
            icon: 'error',
            iconHtml: '<div class="svgErrorContainer" id="svgErrorContainer"></div>',
            customClass: {
                icon: 'no-border'
            },
            showCloseButton: true,
            showConfirmButton: true,
            confirmButtonText: 'Тегін код аламын',
        }).then((result) => {
            if (result.value) {

                window.location.href = "https://api.whatsapp.com/send?phone=77770643011&Сәлеметсізбе! Тегін код алғым келеді";
            }
        })
    }

    let svgSuccessContainer = document.getElementById('svgSuccessContainer');
    let animItemSuccess = bodymovin.loadAnimation({
        wrapper: svgSuccessContainer,
        animType: 'svg',
        loop: true,
        path: '/js/success.json'
    });

    let svgErrorContainer = document.getElementById('svgErrorContainer');
    let animItemError = bodymovin.loadAnimation({
        wrapper: svgErrorContainer,
        animType: 'svg',
        loop: true,
        path: '/js/error.json'
    });
</script>

<script src="/livewire/livewire.js?id=de3fca26689cb5a39af4" data-turbo-eval="false" data-turbolinks-eval="false"></script><script data-turbo-eval="false" data-turbolinks-eval="false">window.livewire = new Livewire();window.Livewire = window.livewire;window.livewire_app_url = '';window.livewire_token = '4AFmTrRWO8qVQpMbXP4ld3H97L02c33cKsV4lw2B';window.deferLoadingAlpine = function (callback) {window.addEventListener('livewire:load', function () {callback();});};let started = false;window.addEventListener('alpine:initializing', function () {if (! started) {window.livewire.start();started = true;}});document.addEventListener("DOMContentLoaded", function () {if (! started) {window.livewire.start();started = true;}});</script>
{% endblock %}